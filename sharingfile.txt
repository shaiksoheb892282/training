select concat(a.lastname," works for ",b.lastname) as Hierarchy from
(select e.lastname,e.empno,e.job,d.mgrno from employee e
join department d on e.workdept=d.deptno) as a join
(select e.lastname,e.empno,e.job,d.mgrno from employee e join
department d on e.workdept=d.deptno) as b
on a.mgrno=b.empno
where a.mgrno!=a.empno
order by a.lastname
;
go


https://cognizant.webex.com/webappng/sites/cognizant/meeting/info/060f9119c71b6b2a19365f3c008bb908?siteurl=cognizant&MTID=m3bf344221712461aaa1bebcd88d09229&meetingAuthToken=QUhTSwAAAATl%2FsCVD%2FqMQYtNYu8d7MesENww3dkx%2Bxvpk6RVqtT91dOrfXUc8EewedcxOHj5w4MbTDForXTG2b0Wd4xX9aNmeK550oW6h7EkLQRFHDTfCxc2stDzhJ8xdLUJePoqAktyr%2FMaQycmY0u3m9pNApuru2Y5nOpXaplmh2IjWt2sXT96RiZnIfG26%2BHcvaappD673UdUm%2BwDePy6FyEy%2FHGwhmUS6kP%2BuUdTWLalQl6TFg%3D%3D


alter trigger trg_productsdelete
on products for delete
as
begin
	declare @prodid int
	set @prodid=(select productid from deleted)
	
		print 'Cannot delete from products...only the discontinued status can be changed'
		rollback transaction
		print 'Updating products table with discontinued status = 1'
		begin transaction tranupdateproducts
			update products
			set discontinued=1 from products p 
			where p.ProductID=@prodid
		commit transaction tranupdateproducts
end

class Program
    {
        static void Main(string[] args)
        {
            //CreateFile();
            MySqlExample();

            Console.ReadKey();
        }

        public static void MySqlExample()
        {
            string con = ConfigurationManager.ConnectionStrings["myRoot"].ConnectionString;
            using (MySqlConnection mySqlcon = new MySqlConnection(con))
            {

                //Console.WriteLine(mySqlcon.State);
                using (MySqlCommand cmd = new MySqlCommand())
                {
                    cmd.Connection = mySqlcon;
                    cmd.CommandText = "show tables;";
                    mySqlcon.Open();
                    MySqlDataReader mySqlDataReader = cmd.ExecuteReader();
                    Console.WriteLine("Select corresponding number to show table details correspondingly");
                    int count = 0;
                    ArrayList a = new ArrayList();

                    while (mySqlDataReader.Read())
                    {
                        Console.Write(++count);
                        Console.WriteLine($"\t{mySqlDataReader[0]}");//\t{mySqlDataReader[1]}\t{mySqlDataReader[2]} {mySqlDataReader[3]}\t{mySqlDataReader[4]}");
                        a.Add(mySqlDataReader[0]);
                    }
                    Console.ReadKey();
                    //mySqlDataReader.Close();
                    //count = Convert.ToInt32(Console.ReadLine());
                    //cmd.CommandText = "Select * from "+a[count-1]+";";
                    //mySqlDataReader = cmd.ExecuteReader();
                    ////Console.WriteLine(mySqlDataReader.FieldCount);
                    //while (mySqlDataReader.Read())
                    //{                        
                    //    Console.WriteLine($"\t{mySqlDataReader[0]}");//\t{mySqlDataReader[1]}\t{mySqlDataReader[2]} {mySqlDataReader[3]}\t{mySqlDataReader[4]}");
                    //}
                }
            }
        }
}
